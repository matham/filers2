
<MainView@BoxLayout>:
    orientation: 'vertical'
    spacing: '5dp'
    canvas:
        Color:
            rgba: app.theme.accent
        Rectangle:
            pos: self.pos
            size: self.size
    BoxLayout:
        size_hint_y: None
        size_hint_min_x: self.minimum_width
        height: '34dp'
        padding: '15dp', '5dp'
        spacing: '5dp'
        canvas:
            Color:
                rgba: app.theme.primary
            Rectangle:
                pos: self.pos
                size: self.size
        FlatLabel:
            size_hint: None, None
            size: self.texture_size
            padding: '5dp', '5dp'
            text: 'Rows:'
            flat_color: app.theme.text_primary
            font_size: '13sp'
        ThemedSpinner:
            size_hint_x: None
            width: '55dp'
            values: ['---', '1', '2', '3', '4', '5', '6', '7', '8']
            text: '---' if not app.player_num_rows else str(app.player_num_rows)
            on_text: app.player_num_rows = None if self.text == '---' else int(self.text)
        FlatLabel:
            size_hint: None, None
            size: self.texture_size
            padding: '5dp', '5dp'
            text: 'Columns:'
            flat_color: app.theme.text_primary
            font_size: '13sp'
        ThemedSpinner:
            size_hint_x: None
            width: '55dp'
            values: ['---', '1', '2', '3', '4', '5', '6', '7', '8']
            text: '---' if not app.player_num_cols else str(app.player_num_cols)
            on_text: app.player_num_cols = None if self.text == '---' else int(self.text)
        FlatImageButton:
            scale_down_color: True
            source: 'flat_plus.png'
            flat_color: app.theme.accent
            on_release: container.add_player()
        Widget
        FlatDivider:
            color: app.theme.divider
        LightThemedToggleButton:
            text: 'Recording'
            bold: True
            padding: '2dp', '2dp'
            size_hint: None, None
            size: self.texture_size
            state: 'normal' if screen_manager.current == 'recording' else 'down'
            on_state: screen_manager.current = 'recording' if self.state == 'normal' else 'processing'
            center_texture: True
        LightThemedToggleButton:
            text: 'Processing'
            bold: True
            padding: '2dp', '2dp'
            size_hint: None, None
            size: self.texture_size
            state: 'normal' if screen_manager.current == 'processing' else 'down'
            on_state: screen_manager.current = 'recording' if self.state == 'down' else 'processing'
            center_texture: True
        FlatDivider:
            color: app.theme.divider
        FlatLabel:
            text: str(error_indicator.count)
            size_hint: None, None
            size: self.texture_size
            padding: '1dp', '5dp'
            flat_color: app.theme.text_primary
        FlatErrorIndicatorPopup:
            id: error_indicator
            scale_down_color: True
            source: 'flat_alert.png'
            flat_color: app.theme.accent
            on_kv_post: app.error_indicator = self
            on_release: self.count = 0
    ScreenManager:
        id: screen_manager
        Screen:
            name: 'recording'
            ScrollView:
                PlayersContainerWidget:
                    id: container
                    cols: app.player_num_cols
                    rows: app.player_num_rows
                    spacing: '5dp'
                    on_kv_post: app.players_widget = self
        Screen:
            name: 'processing'
            ScrollView:
